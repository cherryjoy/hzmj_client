MainUICtrl = {}

function MainUICtrl:Start()
    local mt=TextureMgr.get_Instance():LoadTexture("Home/hallBg")
    self.Texture:set_material(mt)

    Client.TableClose = Client.TableClose + {self, MainUICtrl.TableClose}
    Client.RefreshNumericVlaue = Client.RefreshNumericVlaue + {self, MainUICtrl.RefreshNumericVlaue}
end

function MainUICtrl:Init(name, id, cardNum, imageUrl)
    self.Name:set_text(string.format(Text.RoleName, name))
    self.Id:set_text(string.format(Text.RoleId, id))
    self.Card:set_text(string.format(Text.RoleCardNum, tostring(cardNum)))

    LuaUIViewCtr.FlushPortraitInfo("Home/homeHeadCusPic", imageUrl, self.Icon)

    Client.TableClose = Client.TableClose - {self, MainUICtrl.TableClose}
    Client.RefreshNumericVlaue = Client.RefreshNumericVlaue - {self, MainUICtrl.RefreshNumericVlaue}
end

function MainUICtrl:OnDestroy()

end

function MainUICtrl:RefreshNumericVlaue()
    self.Card:set_text(string.format(Text.RoleCardNum, tostring(Client.RoleInfo.integral)))
end

function MainUICtrl:Score_OnClick()
    --ClientSendMsg.SendRoomBalanceRecord()

    local ref = LuaUIViewCtr.OpenUIHasBg("Home/BalanceRecord")
    ref.Init(ref, {})
end

function MainUICtrl:Help_OnClick()
	local ref = LuaUIViewCtr.OpenUIHasBg("Home/HelpUI")
    --[[
    if Client.IsDebugPlatform() then
        --PlatformHandler.CallShare("", "", "", "screenshot.png", "", "0")
        local param = string.format("{\"code\":1,\"roomid\":\"555555\"}")
        LuaDebug.Log("param: "..param)

        PlatformHandler.CallShare("test title", "test desc", Client.inviteUrl, "", param, "1")
    end
    --]]
end

function MainUICtrl:Setting_OnClick()
    local ref = LuaUIViewCtr.OpenUIHasBg("CommonUI/SettingUI")
    ref.Init(ref)
end

function MainUICtrl:JoinGame_OnClick()
    local ref = LuaUIViewCtr.OpenUIHasBg("Home/JoinGame")
end

function MainUICtrl:CreateRoom_OnClick()
    local ref = LuaUIViewCtr.OpenUIHasBg("Home/CreateRoom")
end

function MainUICtrl:Icon_OnClick()
    local ref = LuaUIViewCtr.OpenUIHasBg("CommonUI/RoleInfoUI")
    ref.Init(ref, Client.RoleInfo.RoleName, Client.RoleInfo.sex, Client.RoleInfo.RoleID, Client.RoleInfo.address, Client.RoleInfo.integral, Client.RoleInfo.imageurl)
end

function MainUICtrl:TableClose()
    self.gameObject:SetActive(true)
end
