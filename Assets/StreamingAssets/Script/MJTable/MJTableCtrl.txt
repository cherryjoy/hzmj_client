MJTableCtrl = {}

function MJTableCtrl:Start( )
    local mt=TextureMgr.get_Instance():LoadTexture("MJTable/MJTable", true)
    self.Texture:set_material(mt)

end

function MJTableCtrl:Init(passwd, amount, horse, beishu, used, rolelist)
    self.roomId = passwd
    self.ID:set_text(string.format(Text.TableName, passwd))
    self.MaShu:set_text(string.format(Text.MaShuName, beishu, horse))
    self.JuShu:set_text(string.format(Text.JuShuName, used, amount, 112))
end

function MJTableCtrl:CardInfoSync(cardInfo)
    if #(cardInfo.owncards.handcard) ~= 14 then
        return
    end

    -- 同步自己的牌
    if cardInfo.owncards ~= nil then
        LuaDebug.Log("card num: "..#(cardInfo.owncards.handcard))
        self.Bottom.CardInfoSync(self.Bottom, cardInfo.owncards.handcard)
    end

    -- 左边的碰牌、明杠牌、暗杠牌
    --[[
    cardInfo.owncards.pengcard = {}
    cardInfo.owncards.gangcardm = {}
    cardInfo.owncards.gangcarda = {}
    local card = {}
    card.type_id = 1
    card.code_id = 5
    table.insert(cardInfo.owncards.pengcard, card)
    local cardm = {}
    cardm.type_id = 1
    cardm.code_id = 9
    table.insert(cardInfo.owncards.gangcardm, cardm)
    local carda = {}
    carda.type_id = 4
    carda.code_id = 7
    table.insert(cardInfo.owncards.gangcarda, carda)
    ]]
    self.Bottom.LeftCardSync(self.Bottom, cardInfo.owncards)

    -- 同步其他人的牌

end

function MJTableCtrl:OnDestroy( )

end

function MJTableCtrl:DeleteRoom_OnClick()
    ClientSendMsg.SendDeleteRoom(self.roomId)
end

function MJTableCtrl.GetCardSprite(card)
    local spriteName = nil
    if card.type_id == enumCARD_TYPE.CARD_TIAO_TYPE then
        spriteName = "tile_me_1"..card.code_id
    elseif card.type_id == enumCARD_TYPE.CARD_TONG_TYPE then
        spriteName = "tile_me_2"..card.code_id
    elseif card.type_id == enumCARD_TYPE.CARD_WANG_TYPE then
        spriteName = "tile_me_"..card.code_id
    elseif card.type_id == enumCARD_TYPE.CARD_HONG_TYPE then
        spriteName = "tile_me_35"
    end

    return spriteName
end

function MJTableCtrl.GetLeftCardSprite(card)
    local spriteName = nil
    if card.type_id == enumCARD_TYPE.CARD_TIAO_TYPE then
        spriteName = "tile_meUp_1"..card.code_id
    elseif card.type_id == enumCARD_TYPE.CARD_TONG_TYPE then
        spriteName = "tile_meUp_2"..card.code_id
    elseif card.type_id == enumCARD_TYPE.CARD_WANG_TYPE then
        spriteName = "tile_meUp_"..card.code_id
    elseif card.type_id == enumCARD_TYPE.CARD_HONG_TYPE then
        spriteName = "tile_meUp_35"
    end

    return spriteName
end
